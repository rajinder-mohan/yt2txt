<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Transcription Admin Dashboard</title>
    <link rel="stylesheet" href="/static/admin.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <h1>Admin Login</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn-primary">Login</button>
            </form>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard hidden">
        <header class="header">
            <h1>YouTube Transcription Admin Dashboard</h1>
            <div class="header-actions">
                <span id="usernameDisplay"></span>
                <button id="logoutBtn" class="btn-secondary">Logout</button>
            </div>
        </header>

        <div class="stats-container">
            <div class="stat-card">
                <h3>Total Videos</h3>
                <p id="statTotal">0</p>
            </div>
            <div class="stat-card success">
                <h3>Successful</h3>
                <p id="statSuccess">0</p>
            </div>
            <div class="stat-card failed">
                <h3>Failed</h3>
                <p id="statFailed">0</p>
            </div>
            <div class="stat-card processing">
                <h3>Processing</h3>
                <p id="statProcessing">0</p>
            </div>
        </div>

        <div class="tabs-container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="videos">Videos</button>
                <button class="tab-btn" data-tab="transcripts">Transcripts</button>
                <button class="tab-btn" data-tab="channel">Process Channel</button>
                <button class="tab-btn" data-tab="ai">AI Processing</button>
                <button class="tab-btn" data-tab="users">User Management</button>
                <button class="tab-btn" data-tab="settings">Settings</button>
            </div>
        </div>

        <!-- Videos Tab -->
        <div id="videosTab" class="tab-content active">
            <div class="controls">
                <input type="text" id="searchInput" placeholder="Search by video ID, title, or channel...">
                <select id="statusFilter">
                    <option value="">All Status</option>
                    <option value="success">Success</option>
                    <option value="failed">Failed</option>
                    <option value="processing">Processing</option>
                    <option value="pending">Pending</option>
                    <option value="processed">Processed</option>
                    <option value="rate_limited">Rate Limited</option>
                </select>
                <select id="channelFilter">
                    <option value="">All Channels</option>
                </select>
                <label style="display: flex; align-items: center; gap: 0.5rem; margin-left: 1rem;">
                    <input type="checkbox" id="showIgnoredCheckbox">
                    <span>Show Ignored</span>
                </label>
                <button id="refreshBtn" class="btn-primary">Refresh</button>
            </div>
            
            <div class="bulk-actions" id="bulkActionsVideos" style="display: none; margin: 1rem 0; padding: 1rem; background: #f0f0f0; border-radius: 5px;">
                <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                    <strong id="selectedCountVideos">0</strong> <span>video(s) selected</span>
                    <button id="bulkGetDataBtn" class="btn-secondary">Get Data</button>
                    <button id="bulkTranscribeBtn" class="btn-secondary">Transcribe</button>
                    <button id="bulkGenerateContentBtn" class="btn-secondary">Generate Content</button>
                    <button id="bulkIgnoreBtn" class="btn-secondary">Ignore Selected</button>
                    <button id="bulkUnignoreBtn" class="btn-secondary">Unignore Selected</button>
                    <button id="clearSelectionBtn" class="btn-secondary">Clear Selection</button>
                </div>
            </div>

            <div class="table-container">
                <table id="videosTable">
                    <thead>
                        <tr>
                            <th style="width: 40px;"><input type="checkbox" id="selectAllVideos" title="Select All"></th>
                            <th style="width: 120px;">Video ID</th>
                            <th style="width: 300px;">Title</th>
                            <th style="width: 150px;">Channel</th>
                            <th style="width: 150px;">URL</th>
                            <th style="width: 100px;">Status</th>
                            <th style="width: 200px;">Transcript Preview</th>
                            <th style="width: 120px;">Generated Content</th>
                            <th style="width: 150px;">Error</th>
                            <th style="width: 120px;">Created</th>
                            <th style="width: 120px;">Updated</th>
                            <th style="width: 150px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="videosTableBody">
                        <tr>
                            <td colspan="10" class="loading">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Transcripts Tab -->
        <div id="transcriptsTab" class="tab-content">
            <div class="controls">
                <input type="text" id="transcriptSearchInput" placeholder="Search by video ID, title, or channel...">
                <select id="transcriptChannelFilter">
                    <option value="">All Channels</option>
                </select>
                <button id="refreshTranscriptsBtn" class="btn-primary">Refresh</button>
            </div>

            <div class="table-container">
                <table id="transcriptsTable">
                    <thead>
                        <tr>
                            <th>Video ID</th>
                            <th>Title</th>
                            <th>Channel</th>
                            <th>Duration</th>
                            <th>Views</th>
                            <th>Upload Date</th>
                            <th>Transcript Preview</th>
                            <th>Updated</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="transcriptsTableBody">
                        <tr>
                            <td colspan="9" class="loading">Loading...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Channel Tab -->
        <div id="channelTab" class="tab-content">
            <div class="channel-submit-section">
                <h2>Process YouTube Channel</h2>
                <div class="channel-form">
                    <input type="text" id="channelUrlInput" placeholder="Enter YouTube channel URL (e.g., https://www.youtube.com/@channelname)" style="flex: 1; padding: 10px; margin-right: 10px;">
                    <input type="number" id="maxVideosInput" placeholder="Max videos (optional)" style="width: 150px; padding: 10px; margin-right: 10px;">
                    <button id="submitChannelBtn" class="btn-primary">Submit Channel</button>
                </div>
                <div id="channelStatus" class="channel-status"></div>
            </div>
            
            <!-- Manual Video Addition Section -->
            <div class="channel-submit-section" style="margin-top: 2rem; border-top: 2px solid #ddd; padding-top: 2rem;">
                <h2>Manually Add Videos</h2>
                <p style="margin-bottom: 1rem; color: #666;">
                    Paste comma-separated video IDs or URLs along with channel name to manually add videos to the database.
                </p>
                
                <div style="margin-bottom: 1rem;">
                    <label for="manualChannelName" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                        Channel/Author Name: <span style="color: red;">*</span>
                    </label>
                    <input 
                        type="text" 
                        id="manualChannelName" 
                        placeholder="e.g., Vineet Malhotra"
                        style="width: 100%; max-width: 500px; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.95rem;"
                    >
                </div>
                
                <div style="margin-bottom: 1rem;">
                    <label for="manualVideoInput" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                        Video IDs or URLs (comma-separated): <span style="color: red;">*</span>
                    </label>
                    <textarea 
                        id="manualVideoInput" 
                        rows="6"
                        placeholder="Paste video IDs or URLs separated by commas. Examples:&#10;dQw4w9WgXcQ, jNQXAC9IVRw&#10;or&#10;https://www.youtube.com/watch?v=dQw4w9WgXcQ, https://www.youtube.com/watch?v=jNQXAC9IVRw"
                        style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.9rem; font-family: monospace; resize: vertical;"
                    ></textarea>
                    <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                        You can paste video IDs (e.g., dQw4w9WgXcQ) or full URLs (e.g., https://www.youtube.com/watch?v=dQw4w9WgXcQ). Separate multiple entries with commas.
                    </p>
                </div>
                
                <button id="addManualVideosBtn" class="btn-primary">Add Videos</button>
                <div id="manualVideoStatus" class="channel-status" style="margin-top: 1rem;"></div>
            </div>
            
            <div class="channel-submit-section" style="margin-top: 2rem; border-top: 2px solid #ddd; padding-top: 2rem;">
                <h2>Extract Video IDs from HTML</h2>
                <p style="margin-bottom: 1rem; color: #666;">
                    Paste the HTML content from a YouTube page to extract video IDs. This is useful when the channel API doesn't work.
                </p>
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="htmlInput" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                        YouTube Page HTML:
                    </label>
                    <textarea 
                        id="htmlInput" 
                        placeholder="Paste HTML content from YouTube page here..." 
                        rows="10"
                        style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem; font-family: monospace;"
                    ></textarea>
                    <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                        <strong>How to get HTML:</strong> Right-click on the YouTube page → "View Page Source" or press Ctrl+U (Cmd+U on Mac), then copy all the HTML and paste it here.
                    </p>
                </div>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <button id="extractIdsBtn" class="btn-primary">Extract Video IDs</button>
                    <button id="processExtractedIdsBtn" class="btn-secondary" style="display: none;">Process Extracted Videos</button>
                    <button id="clearHtmlBtn" class="btn-secondary">Clear</button>
                </div>
                <div id="extractionStatus" class="channel-status"></div>
                <div id="extractedIdsContainer" style="margin-top: 1rem; display: none;">
                    <h3 style="margin-bottom: 0.5rem;">Extracted Video IDs (<span id="extractedCount">0</span>):</h3>
                    <div id="extractedIdsList" style="max-height: 300px; overflow-y: auto; padding: 1rem; background: #f8f9fa; border-radius: 5px; font-family: monospace; font-size: 0.9rem; word-break: break-all;"></div>
                </div>
            </div>
        </div>

        <!-- Users Tab -->
        <div id="usersTab" class="tab-content">
            <div class="user-management-section">
                <h2>User Management</h2>
                
                <div class="user-form-section">
                    <h3>Create New User</h3>
                    <div class="user-form">
                        <input type="text" id="newUsernameInput" placeholder="Username (min 3 characters)" style="flex: 1; padding: 10px; margin-right: 10px;">
                        <input type="password" id="newPasswordInput" placeholder="Password (min 6 characters)" style="flex: 1; padding: 10px; margin-right: 10px;">
                        <button id="createUserBtn" class="btn-primary">Create User</button>
                    </div>
                    <div id="userFormStatus" class="channel-status"></div>
                </div>

                <div class="users-list-section">
                    <h3>Existing Users</h3>
                    <button id="refreshUsersBtn" class="btn-secondary" style="margin-bottom: 10px;">Refresh Users</button>
                    <div class="table-container">
                        <table id="usersTable">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Created At</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <tr>
                                    <td colspan="3" class="loading">Loading...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Prompts Management Tab -->
        <div id="promptsTab" class="tab-content">
            <div class="channel-submit-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2>Prompt Management</h2>
                    <button id="createPromptBtn" class="btn-primary">Create New Prompt</button>
                </div>
                
                <div id="promptsList" style="margin-bottom: 2rem;">
                    <!-- Prompts will be loaded here -->
                </div>
                
                <!-- Create/Edit Prompt Form -->
                <div id="promptFormContainer" style="display: none; border: 2px solid #2196F3; padding: 1.5rem; border-radius: 5px; background: #f8f9fa;">
                    <h3 id="promptFormTitle">Create Prompt</h3>
                    <form id="promptForm">
                        <input type="hidden" id="promptId" value="">
                        
                        <div class="form-group" style="margin-bottom: 1rem;">
                            <label for="promptName" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Name: <span style="color: red;">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="promptName" 
                                required
                                placeholder="e.g., Summarize Transcript"
                                style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem;"
                            >
                        </div>
                        
                        <div class="form-group" style="margin-bottom: 1rem;">
                            <label for="promptDescription" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Description:
                            </label>
                            <input 
                                type="text" 
                                id="promptDescription" 
                                placeholder="Brief description of what this prompt does"
                                style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem;"
                            >
                        </div>
                        
                        <div class="form-group" style="margin-bottom: 1rem;">
                            <label for="promptOperationType" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                Operation Type:
                            </label>
                            <select 
                                id="promptOperationType" 
                                style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem;"
                            >
                                <option value="">Select operation type</option>
                                <option value="summarize">Summarize</option>
                                <option value="extract_keywords">Extract Keywords</option>
                                <option value="generate_content">Generate Content</option>
                                <option value="analyze">Analyze</option>
                                <option value="translate">Translate</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group" style="margin-bottom: 1rem;">
                            <label for="promptSystemPrompt" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                System Prompt (Instructions for AI):
                            </label>
                            <textarea 
                                id="promptSystemPrompt" 
                                rows="4"
                                placeholder="You are a helpful assistant that..."
                                style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem; font-family: monospace;"
                            ></textarea>
                            <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                                System prompt sets the AI's role and behavior. This is sent as a "system" message.
                            </p>
                        </div>
                        
                        <div class="form-group" style="margin-bottom: 1rem;">
                            <label for="promptUserTemplate" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                                User Prompt Template:
                            </label>
                            <textarea 
                                id="promptUserTemplate" 
                                rows="6"
                                placeholder="Please summarize the following transcript:\n\nVideo Title: {video_title}\nChannel: {channel_name}\nTranscript: {transcript}"
                                style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem; font-family: monospace;"
                            ></textarea>
                            <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                                Use {variable_name} for dynamic values. Available variables: video_id, video_title, channel_name, transcript, duration, view_count
                            </p>
                        </div>
                        
                        <div style="display: flex; gap: 1rem;">
                            <button type="submit" class="btn-primary">Save Prompt</button>
                            <button type="button" id="cancelPromptBtn" class="btn-secondary">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <!-- AI Processing Tab -->
        <div id="aiTab" class="tab-content">
            <div class="channel-submit-section">
                <h2>OpenAI GPT Processing</h2>
                <p style="margin-bottom: 1.5rem; color: #666;">
                    Process prompts using OpenAI GPT models. Use a saved prompt or create a custom one.
                </p>
                
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="openaiPromptSelect" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                        Use Saved Prompt (Optional):
                    </label>
                    <select 
                        id="openaiPromptSelect" 
                        style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem;"
                    >
                        <option value="">-- Use Custom Prompt --</option>
                    </select>
                    <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                        Select a saved prompt to use, or leave as "Custom" to enter your own prompt below.
                    </p>
                </div>
                
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="openaiPrompt" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                        Custom Prompt:
                    </label>
                    <textarea 
                        id="openaiPrompt" 
                        placeholder="Enter your prompt here, or select a saved prompt above..." 
                        rows="6"
                        style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem; font-family: inherit;"
                    ></textarea>
                    <div style="margin-top: 0.5rem; display: flex; gap: 0.5rem;">
                        <button type="button" id="saveCustomPromptBtn" class="btn-secondary" style="display: none;">Save as New Prompt</button>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                    <div class="form-group">
                        <label for="openaiModel" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Model:
                        </label>
                        <select 
                            id="openaiModel" 
                            style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem;"
                        >
                            <option value="gpt-3.5-turbo">gpt-3.5-turbo (Fast & Cost-effective)</option>
                            <option value="gpt-4o-mini">gpt-4o-mini (Balanced)</option>
                            <option value="gpt-4">gpt-4 (Most Capable)</option>
                            <option value="gpt-4-turbo">gpt-4-turbo (Latest)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="openaiTemperature" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Temperature: <span id="tempValue">0.7</span>
                        </label>
                        <input 
                            type="range" 
                            id="openaiTemperature" 
                            min="0" 
                            max="2" 
                            step="0.1" 
                            value="0.7"
                            style="width: 100%;"
                        >
                        <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: #666; margin-top: 0.25rem;">
                            <span>Deterministic (0.0)</span>
                            <span>Creative (2.0)</span>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                    <div class="form-group">
                        <label for="openaiMaxTokens" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Max Tokens:
                        </label>
                        <input 
                            type="number" 
                            id="openaiMaxTokens" 
                            min="1" 
                            max="4000" 
                            value="1000"
                            style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem;"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="openaiApiKey" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            OpenAI API Key (Optional):
                        </label>
                        <input 
                            type="password" 
                            id="openaiApiKey" 
                            placeholder="Leave empty to use environment variable"
                            style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem; font-family: monospace;"
                        >
                        <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                            If not provided, the system will use OPENAI_API_KEY from environment variables.
                        </p>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <button id="processAIBtn" class="btn-primary">Process with AI</button>
                    <button id="clearAIBtn" class="btn-secondary">Clear</button>
                    <button id="loadPromptBtn" class="btn-secondary" style="display: none;">Load Selected Prompt</button>
                </div>
                
                <div id="aiStatus" class="channel-status" style="margin-top: 1rem;"></div>
                
                <div id="aiResponseContainer" style="margin-top: 1.5rem; display: none;">
                    <h3 style="margin-bottom: 0.5rem;">AI Response:</h3>
                    <div id="aiResponse" style="padding: 1rem; background: #f8f9fa; border-radius: 5px; border: 1px solid #ddd; white-space: pre-wrap; line-height: 1.6; max-height: 500px; overflow-y: auto;"></div>
                    
                    <div id="aiUsage" style="margin-top: 1rem; padding: 0.75rem; background: #e7f3ff; border-left: 4px solid #2196F3; border-radius: 4px; font-size: 0.85rem; color: #0c5460; display: none;">
                        <strong>Usage:</strong>
                        <div id="aiUsageDetails"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="settingsTab" class="tab-content">
            <div class="channel-submit-section">
                <h2>n8n Webhook Settings</h2>
                <p style="margin-bottom: 1.5rem; color: #666;">
                    Configure your n8n webhook URL to automatically send channel processing requests to your n8n workflow.
                </p>
                
                <div class="settings-form-section">
                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="n8nWebhookUrlInput" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            n8n Webhook URL:
                        </label>
                        <input 
                            type="text" 
                            id="n8nWebhookUrlInput" 
                            placeholder="https://your-n8n-instance.com/webhook/your-webhook-id" 
                            style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 1rem;"
                        >
                        <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                            Enter the full webhook URL from your n8n workflow. When enabled, channel submissions will be sent to this webhook instead of being processed directly.
                        </p>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input 
                                type="checkbox" 
                                id="useWebhookCheckbox" 
                                style="margin-right: 0.5rem; width: 18px; height: 18px; cursor: pointer;"
                            >
                            <span style="font-weight: 500;">Enable webhook integration</span>
                        </label>
                        <p style="margin-top: 0.5rem; margin-left: 1.75rem; font-size: 0.85rem; color: #666;">
                            When enabled, channel URLs submitted from the dashboard will be sent to your n8n webhook instead of being processed directly by this service.
                        </p>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button id="saveWebhookBtn" class="btn-primary">Save Webhook URL</button>
                        <button id="testWebhookBtn" class="btn-secondary">Test Webhook</button>
                    </div>
                    
                    <div id="webhookStatus" class="channel-status" style="margin-top: 1rem;"></div>
                </div>
            </div>
            
            <div class="channel-submit-section" style="margin-top: 2rem; border: 2px solid #ff9800; padding: 1.5rem; background: #fff3e0;">
                <h2 style="color: #ff9800;">⚠️ YouTube Cookies (Required to Fix Bot Detection)</h2>
                <p style="margin-bottom: 1.5rem; color: #e65100; font-weight: 500;">
                    <strong>IMPORTANT:</strong> Configure YouTube cookies to bypass bot detection. Without cookies, you will get "Sign in to confirm you're not a bot" errors.
                </p>
                
                <div class="settings-form-section">
                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="youtubeCookiesInput" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                            Cookie String:
                        </label>
                        <textarea 
                            id="youtubeCookiesInput" 
                            placeholder="Paste cookie string from browser here (format: name1=value1; name2=value2; ...)" 
                            rows="4"
                            style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 5px; font-size: 0.9rem; font-family: monospace;"
                        ></textarea>
                        <div style="margin-top: 0.5rem; padding: 0.75rem; background: #f8f9fa; border-radius: 5px; font-size: 0.85rem; color: #666;">
                            <strong>How to get cookies:</strong>
                            <ol style="margin: 0.5rem 0 0 1.5rem; padding: 0;">
                                <li>Open YouTube in your browser</li>
                                <li>Open Developer Tools (F12 or Right-click → Inspect)</li>
                                <li>Go to the <strong>Network</strong> tab</li>
                                <li>Visit any YouTube page (e.g., https://www.youtube.com/@channelname)</li>
                                <li>Find a request to <code>youtube.com</code> in the network list</li>
                                <li>Click on the request → Go to <strong>Headers</strong> tab</li>
                                <li>Scroll down to find the <strong>cookie:</strong> header</li>
                                <li>Copy the entire cookie value (everything after "cookie: ")</li>
                                <li>Paste it in the field above</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button id="saveCookiesBtn" class="btn-primary">Save Cookies</button>
                        <button id="testCookiesBtn" class="btn-secondary">Test Cookies</button>
                        <button id="deleteCookiesBtn" class="btn-secondary" style="background: #dc3545;">Delete Cookies</button>
                    </div>
                    
                    <div id="cookiesStatus" class="channel-status" style="margin-top: 1rem;"></div>
                    
                    <div id="cookiesInfo" style="margin-top: 1rem; padding: 0.75rem; background: #e7f3ff; border-left: 4px solid #2196F3; border-radius: 4px; font-size: 0.85rem; color: #0c5460;">
                        <strong>Current Status:</strong> <span id="cookiesStatusText">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transcript Modal -->
    <div id="transcriptModal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Full Transcript</h2>
            <div id="transcriptContent" class="transcript-content"></div>
        </div>
    </div>

    <!-- Generated Content Modal -->
    <div id="generatedContentModal" class="modal hidden">
        <div class="modal-content" style="max-width: 90%; max-height: 90vh;">
            <span class="close" onclick="closeGeneratedContentModal()">&times;</span>
            <h2>Generated Content</h2>
            <div id="generatedContentHeader" style="margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #ddd;">
                <p><strong>Video ID:</strong> <span id="gcVideoId"></span></p>
                <p><strong>Video Title:</strong> <span id="gcVideoTitle"></span></p>
            </div>
            <div id="generatedContentList" style="max-height: 70vh; overflow-y: auto;">
                <!-- Generated content items will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirmModal" class="modal hidden">
        <div class="modal-content">
            <h2 id="confirmModalTitle">Confirm Action</h2>
            <p id="confirmModalMessage"></p>
            <div style="display: flex; gap: 0.75rem; justify-content: flex-end; margin-top: 1.5rem;">
                <button id="confirmModalCancel" class="btn-secondary">Cancel</button>
                <button id="confirmModalOk" class="btn-primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <span id="toastMessage"></span>
    </div>

    <script src="/static/admin.js"></script>
</body>
</html>

